{
    "$schema": "https://playground.wordpress.net/blueprint-schema.json",
    "landingPage": "/wp-admin/admin.php?page=guidelines",
    "login": true,
    "steps": [
        {
            "step": "installPlugin",
            "pluginData": {
                "resource": "wordpress.org/plugins",
                "slug": "gutenberg"
            }
        },
        {
            "step": "installPlugin",
            "pluginData": {
                "resource": "url",
                "url": "https://github.com/Jameswlepage/content-guidelines/releases/latest/download/content-guidelines.zip"
            }
        },
        {
            "step": "runPHP",
            "code": "<?php\nrequire_once 'wordpress/wp-load.php';\n\n$json_path = WP_PLUGIN_DIR . '/content-guidelines/samples/mailchimp.json';\n$json = file_get_contents($json_path);\n$data = json_decode($json, true);\n\nif (!$data || !isset($data['guidelines'])) {\n    echo 'Failed to load sample data from: ' . $json_path;\n    exit(1);\n}\n\n$guidelines = $data['guidelines'];\n\n$post_id = wp_insert_post(array(\n    'post_type' => 'content_guidelines',\n    'post_title' => $data['title'],\n    'post_status' => 'publish',\n    'post_content' => wp_json_encode($guidelines, JSON_UNESCAPED_UNICODE),\n));\n\nif (is_wp_error($post_id)) {\n    echo 'Failed to create post: ' . $post_id->get_error_message();\n    exit(1);\n}\n\nupdate_option('wp_content_guidelines_post_id', $post_id);\necho 'Created sample guidelines post: ' . $post_id;\n"
        }
    ]
}
